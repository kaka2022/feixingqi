<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>情侣飞行棋 V1.0 (网页版)</title>
    <style>
        :root {
            --male-color: #3498db; --female-color: #e84393;
            --bg: #fdf2f2; --cell-border: #f8a5c2;
        }
        body {
            margin: 0; background-color: var(--bg); font-family: "Microsoft YaHei", sans-serif;
            display: flex; flex-direction: column; align-items: center; padding-bottom: 20px;
        }
        h1 { color: #d63031; font-size: 1.4rem; margin: 15px 0 5px; }
        .author { font-size: 0.7rem; color: #636e72; margin-bottom: 10px; }

        /* 9x9 大型棋盘布局 */
        #board-container {
            display: grid; grid-template-columns: repeat(9, 40px); grid-template-rows: repeat(9, 40px);
            gap: 4px; padding: 10px; background: white; border: 4px solid #fab1a0;
            border-radius: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); position: relative;
        }
        .cell {
            width: 40px; height: 40px; border: 1px solid var(--cell-border);
            border-radius: 4px; font-size: 0.55rem; display: flex; align-items: center;
            justify-content: center; text-align: center; overflow: hidden; word-break: break-all;
            background: #fffafa; line-height: 1.1;
        }
        .empty { visibility: hidden; }

        /* 核心节点配色 */
        .type-start-m { background: var(--male-color); color: white; font-weight: bold; }
        .type-start-f { background: var(--female-color); color: white; font-weight: bold; }
        .type-task { background: #fff1f2; color: #d63031; }
        .type-action { background: #fdf9e7; color: #b7950b; font-weight: bold; }
        .type-drink { background: #e1f5fe; color: #0288d1; }
        .type-end { background: #d63031; color: white; font-weight: bold; border-radius: 50%; box-shadow: 0 0 10px #d63031; }

        /* 棋子 */
        .piece {
            position: absolute; width: 22px; height: 22px; border-radius: 50%;
            border: 2px solid white; transition: all 0.6s cubic-bezier(0.18, 0.89, 0.32, 1.28); z-index: 100;
        }
        #p-male { background: var(--male-color); box-shadow: 0 0 5px var(--male-color); }
        #p-female { background: var(--female-color); box-shadow: 0 0 5px var(--female-color); }

        /* 消息展示 */
        #msg-panel {
            width: 90%; max-width: 360px; margin-top: 15px; background: white;
            padding: 15px; border-radius: 12px; border-left: 5px solid #d63031;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); text-align: center;
        }
        #task-text { font-size: 1rem; color: #2d3436; min-height: 50px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        
        #dice-btn {
            margin-top: 10px; padding: 12px 60px; border-radius: 30px; border: none;
            background: linear-gradient(135deg, #ff7675, #d63031); color: white;
            font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(214,48,49,0.3);
        }
        #dice-btn:disabled { background: #ccc; box-shadow: none; }
    </style>
</head>
<body>

    <h1>情侣飞行棋 V1.0</h1>
    <div class="author">复刻设计：33的大狗狗 | 网页版适配：Gemini</div>

    <div id="board-container">
        </div>

    <div id="msg-panel">
        <div id="turn-display" style="font-size: 0.8rem; color: #636e72; margin-bottom: 5px;">准备开始</div>
        <div id="task-text">点击投掷，开始你们的夜晚</div>
        <button id="dice-btn" onclick="roll()">投掷骰子</button>
    </div>

    <div id="p-male" class="piece"></div>
    <div id="p-female" class="piece"></div>

<script>
    // 任务内容池（参考图中的格位）
    const tasks = [
        { n: "起点(男)", t: "start-m" },
        { n: "脱一件", t: "action" }, { n: "喝半杯", t: "drink" }, { n: "口交对流水10s", t: "task" },
        { n: "舔耳朵10s", t: "task" }, { n: "嘴喂酒", t: "action" }, { n: "喝半杯", t: "drink" },
        { n: "脱一件", t: "action" }, { n: "伸进内裤30s", t: "task" }, { n: "亲脖子种草莓", t: "task" },
        { n: "后退3格脱一件", t: "action" }, { n: "手交或抠1min", t: "task" }, { n: "喝半杯", t: "drink" },
        { n: "舔大腿内侧10s", t: "task" }, { n: "休一轮", t: "drink" }, { n: "喝半杯", t: "drink" },
        { n: "舌吻30s", t: "task" }, { n: "脱一件", t: "action" }, { n: "退回起点", t: "drink" },
        { n: "后退3格脱一件", t: "action" }, { n: "舔乳头10s", t: "task" }, { n: "脱一件", t: "action" },
        { n: "舌吻30s", t: "task" }, { n: "伸进内裤30s", t: "task" }, { n: "拍私处照1张", t: "action" },
        { n: "选地种草莓", t: "task" }, { n: "休一轮", t: "drink" }, { n: "喝半杯", t: "drink" },
        { n: "后退6格脱一件", t: "action" }, { n: "脱一件", t: "action" }, { n: "打屁股3下", t: "task" },
        { n: "自己脱一件", t: "action" }, { n: "伸进内裤30s", t: "task" }, { n: "喝半杯", t: "drink" },
        { n: "舔到胸口", t: "task" }, { n: "休一轮", t: "drink" }, { n: "喝半杯", t: "drink" },
        { n: "舌吻30s", t: "task" }, { n: "喝一杯脱一件", t: "action" }, { n: "起点(女)", t: "start-f" },
        { n: "终点(必做题)", t: "end" }
    ];

    // 棋盘路径映射 (9x9 环绕)
    const boardLayout = [
        0, 1, 2, 3, 4, 5, 6, 7, 8,
        37, -1, -1, -1, -1, -1, -1, -1, 9,
        36, -1, -1, -1, -1, -1, -1, -1, 10,
        35, -1, -1, 40, 40, 40, -1, -1, 11, // 终点占位
        34, -1, -1, 40, 40, 40, -1, -1, 12,
        33, -1, -1, 40, 40, 40, -1, -1, 13,
        32, -1, -1, -1, -1, -1, -1, -1, 14,
        31, -1, -1, -1, -1, -1, -1, -1, 15,
        30, 29, 28, 27, 26, 25, 24, 23, 22
    ];
    // 女生起点特别标注
    const femaleStartIndex = 39; 

    // 初始化渲染
    const boardEl = document.getElementById('board-container');
    boardLayout.forEach((val, i) => {
        const div = document.createElement('div');
        if (val === -1) div.className = 'empty';
        else if (val === 40) {
            div.className = 'cell type-end';
            div.innerText = i === 31 ? '终点' : '';
        } else {
            const data = tasks[val];
            div.className = `cell type-${data.t}`;
            div.id = `cell-${val}`;
            div.innerText = data.n;
        }
        boardEl.appendChild(div);
    });

    // 游戏状态
    const players = [
        { id: 'p-male', pos: 0, name: '男生', color: '#3498db' },
        { id: 'p-female', pos: 39, name: '女生', color: '#e84393' }
    ];
    let turn = 0; // 0: 男, 1: 女

    function roll() {
        const btn = document.getElementById('dice-btn');
        btn.disabled = true;
        const dice = Math.floor(Math.random() * 6) + 1;
        const p = players[turn];

        document.getElementById('turn-display').innerText = `${p.name} 正在投掷...`;
        
        // 移动逻辑
        setTimeout(() => {
            if (turn === 0) { // 男生顺时针
                p.pos = (p.pos + dice);
                if (p.pos >= 40) p.pos = 40; // 进入终点区
            } else { // 女生逆时针
                p.pos = (p.pos - dice);
                if (p.pos <= 0) p.pos = 40; // 这里的逻辑简化为接近终点
            }

            updatePiecePositions();

            // 任务判断
            const task = (p.pos === 40) ? {n: "终点奖励：转账100元并解锁任意姿势！"} : tasks[p.pos];
            document.getElementById('task-text').innerText = `掷出 ${dice} 点：${task.n}`;
            
            if (p.pos !== 40) {
                turn = 1 - turn;
                btn.disabled = false;
                const nextP = players[turn];
                document.getElementById('turn-display').innerText = `轮到 ${nextP.name} 了`;
                document.getElementById('turn-display').style.color = nextP.color;
            } else {
                document.getElementById('turn-display').innerText = "游戏结束";
                btn.innerText = "重新开始";
                btn.onclick = () => location.reload();
            }
        }, 600);
    }

    function updatePiecePositions() {
        players.forEach(p => {
            // 处理终点的坐标定位
            const targetId = (p.pos === 40) ? 'cell-40' : `cell-${p.pos}`;
            const targetCell = document.getElementById('cell-40') || document.querySelector('.type-end');
            const actualCell = document.getElementById(`cell-${p.pos}`) || targetCell;
            
            const piece = document.getElementById(p.id);
            piece.style.left = (actualCell.offsetLeft + 8) + 'px';
            piece.style.top = (actualCell.offsetTop + 8) + 'px';
        });
    }

    window.onload = updatePiecePositions;
</script>
</body>
</html>
