<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>â¤ï¸ æˆ‘ä»¬çš„ä¸“å±é£è¡Œæ£‹</title>
    <style>
        :root {
            --p1-color: #ff6b81;
            --p2-color: #4834d4;
            --bg-color: #fff5f7;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--bg-color);
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            color: #333;
            touch-action: manipulation;
        }

        h1 { margin-top: 20px; color: #ff4757; font-size: 1.5rem; }

        #status-bar {
            margin: 10px;
            padding: 10px 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            font-weight: bold;
        }

        /* æ£‹ç›˜å¸ƒå±€ï¼š4x4 ç¯å½¢ */
        #board {
            position: relative;
            display: grid;
            grid-template-columns: repeat(4, 75px);
            grid-template-rows: repeat(4, 75px);
            gap: 8px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .cell {
            width: 75px;
            height: 75px;
            background: #fdfcfc;
            border: 2px solid #ffdae0;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: #ff6b81;
            box-sizing: border-box;
            text-align: center;
            padding: 2px;
        }

        .empty { visibility: hidden; }

        /* æ£‹å­æ ·å¼ */
        .piece {
            position: absolute;
            width: 34px;
            height: 34px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
        }

        #p1 { background-color: var(--p1-color); }
        #p2 { background-color: var(--p2-color); transform: translate(5px, 5px); }

        /* æ§åˆ¶åŒº */
        .controls {
            margin-top: 25px;
            text-align: center;
        }

        #dice-btn {
            padding: 15px 50px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, #ff6b81, #ff4757);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
        }

        #dice-btn:active { transform: scale(0.95); }

        #msg-display {
            margin-top: 15px;
            padding: 0 20px;
            min-height: 3rem;
            color: #555;
            font-size: 1.1rem;
            text-align: center;
        }

        /* èƒœåˆ©å¼¹çª— */
        .modal {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 100px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>â¤ï¸ æˆ‘ä»¬çš„é£è¡Œæ£‹</h1>
    
    <div id="status-bar">è½®åˆ° <span id="turn-name" style="color:var(--p1-color)">çº¢è‰²ç©å®¶</span></div>

    <div id="board">
        <div class="cell" id="c0">èµ·ç‚¹</div>
        <div class="cell" id="c1">æŠ±æŠ±</div>
        <div class="cell" id="c2">çœŸå¿ƒè¯</div>
        <div class="cell" id="c3">å¤¸å¯¹æ–¹</div>
        
        <div class="cell" id="c11">äº²ä¸€ä¸‹</div>
        <div class="empty"></div><div class="empty"></div>
        <div class="cell" id="c4">æ‘¸å¤´æ€</div>
        
        <div class="cell" id="c10">å¯¹è§†</div>
        <div class="empty"></div><div class="empty"></div>
        <div class="cell" id="c5">å¤§å†’é™©</div>
        
        <div class="cell" id="c9">æè„¸</div>
        <div class="cell" id="c8">æƒ©ç½š</div>
        <div class="cell" id="c7">äº’æ¢</div>
        <div class="cell" id="c6">ç»ˆç‚¹</div>

        <div id="p1" class="piece"></div>
        <div id="p2" class="piece"></div>
    </div>

    <div class="controls">
        <button id="dice-btn" onclick="roll()">æŠ•æ·éª°å­</button>
        <div id="msg-display">ç‚¹å‡»æŒ‰é’®å¼€å§‹</div>
    </div>

    <div id="winModal" class="modal">
        <h2 id="winner-text"></h2>
        <button onclick="location.reload()">é‡æ–°å¼€å§‹</button>
    </div>

    <script>
        const players = [
            { id: 'p1', pos: 0, name: 'çº¢è‰²ç©å®¶', color: '#ff6b81' },
            { id: 'p2', pos: 0, name: 'è“è‰²ç©å®¶', color: '#4834d4' }
        ];
        
        // è‡ªå®šä¹‰ä»»åŠ¡å†…å®¹
        const tasks = {
            1: "ç»™å¯¹æ–¹ä¸€ä¸ªæŒç»­ 10 ç§’çš„æ·±æ·±æ‹¥æŠ± ğŸ¤—",
            2: "çœŸå¿ƒè¯ï¼šè¯´å‡ºå¯¹æ–¹æœ€è¿‘åšçš„ä¸€ä»¶è®©ä½ å¼€å¿ƒçš„äº‹ â¤ï¸",
            3: "è¿ç»­å¤¸å¯¹æ–¹ä¸‰ä¸ªä¼˜ç‚¹ï¼Œä¸è®¸é‡å¤ï¼âœ¨",
            4: "æ¸©æŸ”åœ°ç»™å¯¹æ–¹ä¸€ä¸ªâ€œæ‘¸å¤´æ€â€ âœ‹",
            5: "å¤§å†’é™©ï¼šè®©å¯¹æ–¹åœ¨ä½ è„¸ä¸Šç”»ä¸€ä¸ªå°çˆ±å¿ƒï¼ˆæˆ–è€…äº²ä¸€å£ï¼‰",
            7: "äº¤æ¢æ‰‹æœºæŸ¥çœ‹å¯¹æ–¹ç›¸å†Œæœ€åä¸€å¼ ç…§ç‰‡ ğŸ“¸",
            8: "ã€æƒ©ç½šã€‘å€’é€€ 2 æ ¼ï¼Œå¹¶ç»™å¯¹æ–¹æ‰æ‰è‚©è†€ ğŸ’†",
            9: "è½»è½»æä½å¯¹æ–¹çš„è„¸è›‹ä¿æŒ 5 ç§’ ğŸ¤",
            10: "ä¸¤äººæ·±æƒ…å¯¹è§† 20 ç§’ï¼Œå…ˆç¬‘çš„äººè¾“äº†ï¼",
            11: "äº²ä¸€ä¸‹å¯¹æ–¹çš„é¢å¤´æˆ–è„¸é¢Š ğŸ’‹"
        };

        let currentPlayerIndex = 0;
        const maxPos = 11;

        function roll() {
            const btn = document.getElementById('dice-btn');
            btn.disabled = true;

            const dice = Math.floor(Math.random() * 6) + 1;
            const p = players[currentPlayerIndex];
            
            document.getElementById('msg-display').innerHTML = `${p.name} æ·å‡ºäº† <strong>${dice}</strong> ç‚¹`;

            setTimeout(() => {
                p.pos += dice;
                if (p.pos >= maxPos) {
                    p.pos = maxPos;
                    endGame(p);
                }
                
                updateUI();
                checkTask(p);
            }, 400);
        }

        function checkTask(p) {
            setTimeout(() => {
                const task = tasks[p.pos];
                if (task) {
                    document.getElementById('msg-display').innerHTML = `ä»»åŠ¡ï¼š${task}`;
                }
                
                // å‡†å¤‡ä¸‹ä¸€å›åˆ
                currentPlayerIndex = 1 - currentPlayerIndex;
                const nextP = players[currentPlayerIndex];
                const turnDisplay = document.getElementById('turn-name');
                turnDisplay.innerText = nextP.name;
                turnDisplay.style.color = nextP.color;
                
                document.getElementById('dice-btn').disabled = false;
            }, 600);
        }

        function updateUI() {
            players.forEach(p => {
                const piece = document.getElementById(p.id);
                const cell = document.getElementById(`c${p.pos}`);
                piece.style.left = (cell.offsetLeft + 20) + 'px';
                piece.style.top = (cell.offsetTop + 20) + 'px';
            });
        }

        function endGame(p) {
            const modal = document.getElementById('winModal');
            document.getElementById('winner-text').innerText = `ğŸ‰ ${p.name} è·èƒœï¼\nè´¥è€…è¦ç­”åº”èƒœè€…ä¸€ä¸ªæ„¿æœ›å“¦ï¼`;
            modal.style.display = 'block';
        }

        // åˆå§‹ä½ç½®
        window.onload = updateUI;
    </script>
</body>
</html>
