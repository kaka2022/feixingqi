<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ” ç»ˆæç§å¯†é£è¡Œæ£‹</title>
    <style>
        :root {
            --p1-color: #ff4757; --p2-color: #2f3542;
            --bg-dark: #0f0c29; --reward-bg: #ff758c; --punish-bg: #6a11cb;
        }
        body {
            margin: 0; background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
            color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden;
        }
        h1 { font-size: 1.2rem; margin: 15px 0; color: #ff4757; text-shadow: 0 0 10px rgba(255,71,87,0.5); }
        
        /* 5x5 æ£‹ç›˜å¸ƒå±€ */
        #board {
            display: grid; grid-template-columns: repeat(5, 65px); grid-template-rows: repeat(5, 65px);
            gap: 8px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 15px; position: relative;
        }
        .cell {
            width: 65px; height: 65px; border-radius: 10px; font-size: 0.65rem;
            display: flex; align-items: center; justify-content: center; text-align: center;
            padding: 4px; box-sizing: border-box; border: 1px solid rgba(255,255,255,0.1);
        }
        .empty { visibility: hidden; }
        
        /* æ ¼å­é…è‰² */
        .type-start { background: #fff; color: #000; font-weight: bold; }
        .type-reward { background: var(--reward-bg); color: #fff; }
        .type-punish { background: var(--punish-bg); color: #fff; }
        .type-special { background: #f1c40f; color: #000; font-weight: bold; } /* é“å…·æ ¼ */
        .type-end { background: #e91e63; color: #fff; font-weight: bold; box-shadow: 0 0 15px #e91e63; }

        /* æ£‹å­ */
        .piece {
            position: absolute; width: 28px; height: 28px; border-radius: 50%;
            border: 2px solid #fff; transition: all 0.5s cubic-bezier(0.18, 0.89, 0.32, 1.28); z-index: 10;
        }
        #p1 { background: var(--p1-color); }
        #p2 { background: var(--p2-color); transform: translate(6px, 6px); }

        /* éª°å­ä¸å±•ç¤ºåŒº */
        .dice-area { margin: 15px 0; display: flex; flex-direction: column; align-items: center; }
        #dice-btn {
            padding: 10px 40px; border-radius: 25px; border: none;
            background: #ff4757; color: white; font-weight: bold; font-size: 1rem;
        }
        #msg-box {
            width: 90%; max-width: 320px; min-height: 100px; margin-top: 15px;
            background: rgba(0,0,0,0.4); border: 1px solid #ff4757;
            border-radius: 10px; padding: 15px; text-align: center;
        }
        .task-content { font-size: 1rem; line-height: 1.4; color: #ff758c; margin-top: 5px; }
        .card-tag { color: #f1c40f; font-weight: bold; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>

<h1>ğŸ” æä¹é£è¡Œæ£‹ï¼šå…¨æŒ‡ä»¤é›†æˆç‰ˆ</h1>

<div id="board">
    </div>

<div class="dice-area">
    <button id="dice-btn" onclick="roll()">æŠ•æ·éª°å­</button>
</div>

<div id="msg-box">
    <div id="msg-title" style="font-weight: bold;">ç­‰å¾…å¼€å§‹...</div>
    <div id="msg-body" class="task-content">å‡†å¤‡å¥½åº¦è¿‡ä¸€ä¸ªéš¾å¿˜çš„å¤œæ™šäº†å—ï¼Ÿ</div>
</div>

<div id="p1" class="piece"></div>
<div id="p2" class="piece"></div>

<script>
    // 1. å…¨ä»»åŠ¡åº“æ•´åˆ
    const taskLibrary = {
        rewards: [
            "ã€è½»ã€‘äº’ç›¸æ·±å»+æƒ…è¯3å¥ (1-2min)", "ã€è½»ã€‘å¸®å¯¹æ–¹èˆ”è€³æœµ/ä¹³å¤´60ç§’", "ã€è½»ã€‘å±•ç¤ºæƒ…è¶£å†…è¡£è½¬åœˆå±•ç¤º",
            "ã€ä¸­ã€‘69å¼2åˆ†é’Ÿï¼Œçœ‹è°å…ˆå¿ä¸ä½", "ã€ä¸­ã€‘å¥³ä¸Šä½éª‘3åˆ†é’Ÿï¼Œä½ æ§èŠ‚å¥", "ã€ä¸­ã€‘å¸®å¯¹æ–¹ä¹³äº¤åˆ°å°„",
            "ã€é‡ã€‘å¯¹æ–¹æ·±å–‰+å£çˆ†åç²¾ç»™ä½ ", "ã€é‡ã€‘ä¸€èµ·æ— å¥—å†…å°„ä¸€æ¬¡", "ã€é‡ã€‘å¯¹æ–¹å½“å¥´éš¶å–Šä¸»äººä¼ºå€™ä½ ",
            "ã€æã€‘æ»¡è¶³ä½ ä»»ä½•è¦æ±‚ä¸€æ™š", "ã€æã€‘é‡åº¦æ„Ÿå®˜å‰¥å¤ºåæè‡´æ€§çˆ±"
        ],
        punishments: [
            "ã€è½»ã€‘è‡ªæ…°å±•ç¤º2åˆ†é’Ÿå¹¶å¯¹è§†", "ã€è½»ã€‘å£90ç§’ï¼Œå¤šç”¨èˆŒå¤´", "ã€è½»ã€‘è¢«æ‰‡è€³å…‰2ä¸‹+è®¤é”™",
            "ã€ä¸­ã€‘åå…¥8min+æ‰“å±è‚¡10ä¸‹", "ã€ä¸­ã€‘è¾¹ç¼˜æ§åˆ¶5æ¬¡ï¼Œå¿«åˆ°å°±åœ", "ã€ä¸­ã€‘æ»´èœ¡åœ¨èƒ¸éƒ¨/å¤§è…¿20æ»´",
            "ã€é‡ã€‘å…¨èº«ç´§ç¼š+è’™çœ¼+å£çƒ15min", "ã€é‡ã€‘ç”¨é­å­æˆ–çš®å¸¦æŠ½30ä¸‹", "ã€é‡ã€‘å¼ºåˆ¶ç©åˆ°å¤±ç¦/æ½®å¹",
            "ã€æã€‘æ„Ÿå®˜å‰¥å¤ºæ”¾ç½®åˆ°ç»“æŸ", "ã€æã€‘é«˜æ½®ç¦æ­¢æ•´åœºï¼Œç»“æŸå¼ºåˆ¶10æ¬¡"
        ],
        specials: [
            "ğŸ è·å¾—ã€åè½¬å¡ã€‘ï¼šå¯å°†ä¸‹æ¬¡æƒ©ç½šè½¬ç§»ç»™å¯¹æ–¹",
            "ğŸ è·å¾—ã€å‡åŠå¡ã€‘ï¼šä¸‹æ¬¡æƒ©ç½šæ—¶é•¿/æ¬¡æ•°å‡åŠ",
            "ğŸ è·å¾—ã€é‡æŠ•å¡ã€‘ï¼šå¯å¼ºåˆ¶å¯¹æ–¹é‡æ–°æŠ•æ·",
            "ğŸ è·å¾—ã€å…ç–«å¡ã€‘ï¼šè±å…ä¸‹ä¸€æ¬¡ä»»ä½•æƒ©ç½š"
        ]
    };

    // 2. æ£‹ç›˜æ ¼å­å®šä¹‰ (16æ ¼ç¯å½¢)
    const cells = [
        { type: 'start', text: 'èµ·ç‚¹' },
        { type: 'reward', text: 'ç”œèœœ' }, { type: 'punish', text: 'æƒ©ç½š' },
        { type: 'special', text: 'å¡ç‰Œ' }, { type: 'reward', text: 'å¥–åŠ±' },
        { type: 'punish', text: 'é‡ç½š' }, { type: 'reward', text: 'å¤§å¥–' },
        { type: 'special', text: 'å¡ç‰Œ' }, { type: 'punish', text: 'æŒ‘æˆ˜' },
        { type: 'reward', text: 'è¯±æƒ‘' }, { type: 'punish', text: 'å±ˆè¾±' },
        { type: 'special', text: 'å¡ç‰Œ' }, { type: 'reward', text: 'æä¹' },
        { type: 'punish', text: 'æè‡´' }, { type: 'reward', text: 'æƒŠå–œ' },
        { type: 'end', text: 'ç»ˆç‚¹' }
    ];

    // 3. 5x5 ç¯å½¢å¸ƒå±€ç´¢å¼•æ˜ å°„
    const layout = [0, 1, 2, 3, 4, 15, -1, -1, -1, 5, 14, -1, -1, -1, 6, 13, -1, -1, -1, 7, 12, 11, 10, 9, 8];
    const boardEl = document.getElementById('board');
    layout.forEach((idx, i) => {
        const div = document.createElement('div');
        if (idx === -1) div.className = 'empty';
        else {
            div.className = `cell type-${cells[idx].type}`;
            div.id = `c${idx}`;
            div.innerText = cells[idx].text;
        }
        boardEl.appendChild(div);
    });

    // 4. æ¸¸æˆé€»è¾‘
    const players = [
        { id: 'p1', pos: 0, name: 'çº¢è‰²ç©å®¶', color: '#ff4757', cards: [] },
        { id: 'p2', pos: 0, name: 'é»‘è‰²ç©å®¶', color: '#fff', cards: [] }
    ];
    let turn = 0;

    function roll() {
        const btn = document.getElementById('dice-btn');
        btn.disabled = true;
        const dice = Math.floor(Math.random() * 6) + 1;
        const p = players[turn];

        document.getElementById('msg-title').innerText = `${p.name} æŠ•æ·ä¸­...`;
        
        setTimeout(() => {
            p.pos += dice;
            if (p.pos >= 15) p.pos = 15;
            updateUI();
            handleLanding(p, dice);
        }, 600);
    }

    function handleLanding(p, dice) {
        const cell = cells[p.pos];
        let taskText = "";
        let title = `${p.name} æ·å‡º ${dice} ç‚¹`;

        if (cell.type === 'reward') {
            taskText = taskLibrary.rewards[Math.floor(Math.random() * taskLibrary.rewards.length)];
        } else if (cell.type === 'punish') {
            taskText = taskLibrary.punishments[Math.floor(Math.random() * taskLibrary.punishments.length)];
        } else if (cell.type === 'special') {
            const card = taskLibrary.specials[Math.floor(Math.random() * taskLibrary.specials.length)];
            p.cards.push(card);
            taskText = `æŠ½åˆ°ä¸€å¼ å¡ï¼š${card}`;
        } else if (cell.type === 'end') {
            taskText = "ğŸ‰ æŠµè¾¾ç»ˆç‚¹ï¼è´¥è€…ä»Šæ™šå½»åº•æ²¦ä¸ºèƒœè€…çš„å¥´éš¶ï¼Œæ»¡è¶³ä»»ä½•æé‡åº¦è¦æ±‚ï¼";
        }

        document.getElementById('msg-title').innerText = title;
        document.getElementById('msg-body').innerText = taskText;

        if (p.pos < 15) {
            turn = 1 - turn;
            document.getElementById('dice-btn').disabled = false;
        } else {
            document.getElementById('dice-btn').innerText = "ç»“æŸ";
        }
    }

    function updateUI() {
        players.forEach(p => {
            const el = document.getElementById(p.id);
            const cellEl = document.getElementById(`c${p.pos}`);
            el.style.left = (cellEl.offsetLeft + 18) + 'px';
            el.style.top = (cellEl.offsetTop + 18) + 'px';
        });
    }

    window.onload = updateUI;
</script>
</body>
</html>
