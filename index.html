<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ” æä¹èˆªçº¿ï¼šé•¿æ—¶å¯¹æˆ˜ç‰ˆ</title>
    <style>
        :root {
            --p1-color: #ff4757; --p2-color: #00d2d3;
            --bg-dark: #0a0a12; --accent: #e91e63;
        }
        body {
            margin: 0; background-color: var(--bg-dark); color: white;
            font-family: 'PingFang SC', sans-serif; display: flex; flex-direction: column; align-items: center;
        }
        
        /* 7x7 å¤§å‹æ£‹ç›˜ */
        #game-board {
            display: grid; grid-template-columns: repeat(7, 50px); grid-template-rows: repeat(7, 50px);
            gap: 5px; padding: 15px; background: rgba(255,255,255,0.03);
            border: 2px solid #333; border-radius: 10px; position: relative; margin-top: 10px;
        }
        .cell {
            width: 50px; height: 50px; border-radius: 6px; font-size: 0.6rem;
            display: flex; align-items: center; justify-content: center; text-align: center;
            border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box;
        }
        
        /* é¢œè‰²ç³»ç»Ÿ */
        .type-start { background: #fff; color: #000; }
        .type-r1 { background: #ff758c; } /* è½»å¥–åŠ± */
        .type-r2 { background: #ff4757; font-weight: bold; } /* é‡å¥–åŠ± */
        .type-p1 { background: #a29bfe; } /* è½»æƒ©ç½š */
        .type-p2 { background: #6c5ce7; font-weight: bold; } /* é‡æƒ©ç½š */
        .type-trap { background: #57606f; color: #ffa502; } /* é™·é˜±/åœç•™æ ¼ */
        .type-card { background: #f1c40f; color: #000; } /* é“å…· */
        .type-end { background: #e91e63; box-shadow: 0 0 15px #e91e63; animation: breathe 2s infinite; }
        
        @keyframes breathe { 0% { opacity: 0.7; } 50% { opacity: 1; } 100% { opacity: 0.7; } }

        /* æ£‹å­ */
        .piece {
            position: absolute; width: 22px; height: 22px; border-radius: 50%;
            border: 2px solid #fff; transition: all 0.6s ease; z-index: 10;
        }
        #p1 { background: var(--p1-color); }
        #p2 { background: var(--p2-color); transform: translate(4px, 4px); }

        /* å±•ç¤ºçª—å£ */
        #info-panel {
            width: 90%; max-width: 360px; margin-top: 15px;
            background: rgba(255,255,255,0.07); border-radius: 15px; padding: 15px;
            text-align: center; border-bottom: 3px solid var(--accent);
        }
        .timer { font-size: 0.8rem; color: #aaa; margin-bottom: 5px; }
        .current-task { font-size: 1rem; line-height: 1.5; min-height: 60px; margin: 10px 0; color: #ff758c; }
        
        #dice-btn {
            padding: 12px 50px; border-radius: 30px; border: none;
            background: linear-gradient(45deg, #ff4757, #e91e63);
            color: white; font-size: 1.1rem; font-weight: bold; cursor: pointer;
        }
        #dice-btn:disabled { background: #333; color: #666; cursor: not-allowed; }
        .empty { visibility: hidden; }
    </style>
</head>
<body>

    <h1 style="margin-bottom: 5px;">ğŸ«¦ æä¹é•¿å¾ (60min+)</h1>
    <div class="timer">å»ºè®®å‡†å¤‡ï¼šé¿å­•å¥—ã€æ¶¦æ»‘å‰‚ã€å„ç±»ç©å…·ã€çœ¼ç½©ã€ç»³ç´¢ã€æ¸©æ°´</div>

    <div id="game-board">
        </div>

    <div id="info-panel">
        <div id="turn-info" style="font-weight: bold; color: #fff;">ç‚¹å‡»å¼€å§‹æŠ•æ·</div>
        <div id="task-display" class="current-task">å¤œæ™šæ‰åˆšåˆšå¼€å§‹...</div>
        <button id="dice-btn" onclick="roll()">æŠ•æ·éª°å­</button>
    </div>

    <div id="p1" class="piece"></div>
    <div id="p2" class="piece"></div>

<script>
    // 1. æ‰©å……åçš„å…¨é‡ä»»åŠ¡æ±  (åŒ…å«ä½ å‘çš„æ‰€æœ‰å†…å®¹)
    const library = {
        r1: [ // è½»å¥–åŠ±
            "äº’ç›¸æ·±å»å¹¶è¯´3å¥æƒ…è¯ (2min)", "ç”¨å˜´å–‚å¯¹æ–¹åƒä¸œè¥¿/å–æ°´", "ç©¿æƒ…è¶£å†…è¡£å±•ç¤ºè½¬åœˆ", 
            "å¸®å¯¹æ–¹èˆ”è€³æœµ/ä¹³å¤´å„60ç§’", "æ¸©æŸ”æŠšæ‘¸å¯¹æ–¹å…¨èº«3åˆ†é’Ÿ"
        ],
        r2: [ // é‡å¥–åŠ±
            "69å¼ç›´åˆ°å…¶ä¸­ä¸€äººæ±‚é¥¶", "å¥³ä¸Šä½éª‘ä¹˜5åˆ†é’Ÿ(è‡ªå·±æ§é€Ÿ)", "å¸®å¯¹æ–¹ä¹³äº¤åˆ°å°„", 
            "å¯¹æ–¹æ·±å–‰å¹¶å£çˆ†åç²¾", "æ»¡è¶³ä½ ä»»ä½•ä¸€ä¸ªä»æœªæè¿‡çš„è¦æ±‚"
        ],
        p1: [ // è½»æƒ©ç½š
            "è‡ªæ…°å±•ç¤º2åˆ†é’Ÿå¹¶æŒç»­å¯¹è§†", "æ‰‡è€³å…‰2ä¸‹å¹¶è¯´ï¼šä¸»äººå£åŠ›æˆ‘é”™äº†", "æˆ´ä¸Šé¡¹åœˆåœ¨æˆ¿é—´çˆ¬ä¸¤åœˆ", 
            "ç»™å¯¹æ–¹å£90ç§’(å¤šç”¨èˆŒå¤´)", "èˆ”å¯¹æ–¹è„šä¸«åŠè¶¾ç¼2åˆ†é’Ÿ"
        ],
        p2: [ // é‡æƒ©ç½š
            "åå…¥8åˆ†é’Ÿ+è¢«æ‰“å±è‚¡10ä¸‹", "è¾¹ç¼˜æ§åˆ¶5æ¬¡(å¿«å°„æ—¶åœä¸‹)", "æ»´èœ¡åœ¨æ•æ„Ÿéƒ¨ä½20æ»´", 
            "å…¨èº«ç´§ç¼š+è’™çœ¼+å£çƒæ”¾ç½®15min", "ä¸å‡†åŠ¨ï¼Œç”±å¯¹æ–¹ç©å¼„åˆ°æ½®å¹/å¤±ç¦"
        ],
        trap: [ // é™·é˜±/å¼ºåˆ¶æ ¼
            "ğŸ”¥ ç¼ ç»µæ—¶åˆ»ï¼šåŸåœ°åœç•™ï¼Œåšçˆ±ç›´åˆ°æ·å‡ºå•æ•°æ‰èƒ½ç¦»å¼€",
            "ğŸ”¥ ä½“åŠ›è€ƒéªŒï¼šåŸåœ°åœç•™ï¼Œå¯¹æ–¹ä»»æ„æŠ˜ç£¨ä½ 5åˆ†é’Ÿ",
            "ğŸ”¥ æåº¦æ¸´æœ›ï¼šåé€€3æ ¼ï¼Œå¹¶é‡æ–°æ‰§è¡Œè½ç‚¹ä»»åŠ¡"
        ],
        card: [
            "ğŸƒã€åè½¬å¡ã€‘ä¸‹æ¬¡æƒ©ç½šè½¬ç§»ç»™å¯¹æ–¹", "ğŸƒã€é‡æŠ•å¡ã€‘å¼ºåˆ¶å¯¹æ–¹é‡æŠ•",
            "ğŸƒã€åŒå€å¡ã€‘ä¸‹æ¬¡å¥–åŠ±/æƒ©ç½šæ•ˆæœx2", "ğŸƒã€å¥´éš¶å¡ã€‘æ¥ä¸‹æ¥çš„3å›åˆå¯¹æ–¹å¿…é¡»ç§°å‘¼ä½ ä¸ºä¸»äºº"
        ]
    };

    // 2. 24æ ¼å¤§æ£‹ç›˜å®šä¹‰ (7x7 ç¯å½¢)
    // å¸ƒå±€ç´¢å¼•é¡ºåº: 0-6(ä¸Š), 12(å³), 18(ä¸‹), 24(å·¦)
    const cells = [
        {t:'start', n:'èµ·ç‚¹'}, {t:'r1', n:'æš–åœº'}, {t:'p1', n:'è°ƒæ•™'}, {t:'card', n:'å¡ç‰Œ'}, {t:'r1', n:'ç”œèœœ'}, {t:'p2', n:'é‡ç½š'}, {t:'trap', n:'ç¼ ç»µ'},
        {t:'r2', n:'é«˜æ½®'}, {t:'p1', n:'æœä»'}, {t:'card', n:'å¡ç‰Œ'}, {t:'r1', n:'è¯±æƒ‘'}, {t:'p2', n:'æè‡´'}, {t:'trap', n:'å¼ºåˆ¶'},
        {t:'end', n:'ç»ˆç‚¹'}, {t:'r2', n:'å¥–åŠ±'}, {t:'p2', n:'é‡åº¦'}, {t:'card', n:'å¡ç‰Œ'}, {t:'r1', n:'äº«å—'}, {t:'p1', n:'ç¾è€»'},
        {t:'trap', n:'åœç•™'}, {t:'r2', n:'æä¹'}, {t:'p2', n:'å‡Œè¾±'}, {t:'card', n:'å¡ç‰Œ'}, {t:'r1', n:'æ¸©æŸ”'}
    ];

    // 7x7 çŸ©é˜µæ˜ å°„ (å…±49æ ¼ï¼Œç¯å½¢è·¯å¾„24æ ¼)
    const layout = [
        0, 1, 2, 3, 4, 5, 6,
        23, -1, -1, -1, -1, -1, 7,
        22, -1, -1, -1, -1, -1, 8,
        21, -1, -1, -1, -1, -1, 9,
        20, -1, -1, -1, -1, -1, 10,
        19, -1, -1, -1, -1, -1, 11,
        18, 17, 16, 15, 14, -1, 12 // 13æ˜¯ç»ˆç‚¹ï¼Œæ”¾åœ¨ä¸­å¿ƒæˆ–æœ«å°¾
    ];
    // å¾®è°ƒç»ˆç‚¹ä½ç½®åˆ°å·¦ä¸‹è§’å‰çš„ç©ºä½
    layout[47] = 13; 

    const boardEl = document.getElementById('game-board');
    layout.forEach((idx, i) => {
        const div = document.createElement('div');
        if (idx === -1) div.className = 'empty';
        else {
            div.className = `cell type-${cells[idx].t}`;
            div.id = `c${idx}`;
            div.innerText = cells[idx].n;
        }
        boardEl.appendChild(div);
    });

    // 3. æ¸¸æˆæ ¸å¿ƒ
    const players = [
        { id: 'p1', pos: 0, name: 'çº¢è‰²', color: '#ff4757' },
        { id: 'p2', pos: 0, name: 'è“è‰²', color: '#00d2d3' }
    ];
    let turn = 0;

    function roll() {
        const btn = document.getElementById('dice-btn');
        btn.disabled = true;
        const dice = Math.floor(Math.random() * 6) + 1;
        const p = players[turn];

        document.getElementById('turn-info').innerText = `${p.name} æŠ•æ·ä¸­...`;
        
        setTimeout(() => {
            p.pos += dice;
            if (p.pos >= 13 && p.pos < 18) { // ç®€å•é€»è¾‘çº å
                // ç¡®ä¿èƒ½èµ°åˆ°ç»ˆç‚¹
            }
            if (p.pos >= 23) p.pos = 13; // ç»ˆç‚¹
            
            updateUI();
            
            const cell = cells[p.pos >= 24 ? 13 : p.pos];
            let task = "";
            if(cell.t === 'r1') task = library.r1[Math.floor(Math.random()*library.r1.length)];
            if(cell.t === 'r2') task = library.r2[Math.floor(Math.random()*library.r2.length)];
            if(cell.t === 'p1') task = library.p1[Math.floor(Math.random()*library.p1.length)];
            if(cell.t === 'p2') task = library.p2[Math.floor(Math.random()*library.p2.length)];
            if(cell.t === 'trap') task = library.trap[Math.floor(Math.random()*library.trap.length)];
            if(cell.t === 'card') task = library.card[Math.floor(Math.random()*library.card.length)];
            if(cell.t === 'end') task = "ğŸ‰ æŠµè¾¾ç»ˆç‚¹ï¼å…¨åœºå¤§å¥–ï¼šèƒœè€…æ‹¥æœ‰å¯¹è´¥è€…çš„ç»å¯¹å¤„ç½®æƒï¼Œæ‰§è¡Œä»»æ„æé‡åº¦å†…å®¹1å°æ—¶ã€‚";

            document.getElementById('turn-info').innerText = `${p.name} æ·å‡º ${dice} ç‚¹`;
            document.getElementById('task-display').innerText = task;

            if (p.pos !== 13) {
                turn = 1 - turn;
                setTimeout(() => { btn.disabled = false; }, 2000);
            }
        }, 600);
    }

    function updateUI() {
        players.forEach(p => {
            const cellEl = document.getElementById(`c${p.pos > 23 ? 13 : p.pos}`);
            const piece = document.getElementById(p.id);
            piece.style.left = (cellEl.offsetLeft + 14) + 'px';
            piece.style.top = (cellEl.offsetTop + 14) + 'px';
        });
    }

    window.onload = updateUI;
</script>
</body>
</html>
